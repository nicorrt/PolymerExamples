<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./ComponentePadre.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">

<dom-module id="componente-abuelo">
  <template>
    <style>
      :host {
        display: inline-flex;
        flex-direction: column;
      }
    </style>


    <h2>[[prop1]]</h2>
    <p>[[informacion]]</p>
    <button on-click="openHijo">Enviar Mensaje</button>
    <template is="dom-if" if="[[!clickado]]">
    </template>
    <template is="dom-if" if="[[clickado]]">
      <componente-padre id="1"></componente-padre>
      <componente-padre id="2"></componente-padre>
    </template>
    
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class ComponenteAbuelo extends Polymer.Element {
      static get is() { return 'componente-abuelo'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'Abuelo'
          },
          clickado: {
            type: Boolean,
            value: false
          }, 
          informacion: {
            type: String,
            value: ''
          }
        };
      }

      openHijo() {
        if (this.clickado == false) {
          this.clickado = true;
        } else {
          this.clickado = false;
        }
        this.dispatchEvent(new CustomEvent('mensaje', {
          detail: {
            valor: 'He hecho click en el abuelo',
          }
        }));
      }

    }
    document.querySelector('componente-abuelo').addEventListener('mensaje', function(datos){
        
       this.informacion = datos.detail.valor;
      
      });

    window.customElements.define(ComponenteAbuelo.is, ComponenteAbuelo);
  </script>
</dom-module>